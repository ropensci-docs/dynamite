<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate a Bayesian Dynamic Multivariate Panel Model With Multiple Imputation — dynamice • dynamite</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate a Bayesian Dynamic Multivariate Panel Model With Multiple Imputation — dynamice"><meta name="description" content="Applies multiple imputation using mice::mice() to the supplied data
and fits a dynamic multivariate panel model to each imputed data set using
dynamite(). Posterior samples from each imputation run are
combined. When using wide format imputation, the long format data is
automatically converted to a wide format before imputation to preserve the
longitudinal structure, and then converted back to long format for
estimation."><meta property="og:description" content="Applies multiple imputation using mice::mice() to the supplied data
and fits a dynamic multivariate panel model to each imputed data set using
dynamite(). Posterior samples from each imputation run are
combined. When using wide format imputation, the long format data is
automatically converted to a wide format before imputation to preserve the
longitudinal structure, and then converted back to long format for
estimation."><meta property="og:image" content="https://docs.ropensci.org/dynamite/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">dynamite</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.5.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="../articles/dynamite.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dynamite_custom.html">Model customization and non-MCMC estimation with dynamite</a></li>
    <li><a class="dropdown-item" href="../articles/dynamite_priors.html">Priors for dynamic multivariate panel models</a></li>
    <li><a class="dropdown-item" href="../articles/dynamite_simulation.html">Simulating data from a dynamic multivariate panel model</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/dynamite/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Estimate a Bayesian Dynamic Multivariate Panel Model With Multiple Imputation</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/dynamite/blob/master/R/dynamice.R" class="external-link"><code>R/dynamice.R</code></a></small>
      <div class="d-none name"><code>dynamice.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Applies multiple imputation using <code><a href="https://amices.org/mice/reference/mice.html" class="external-link">mice::mice()</a></code> to the supplied <code>data</code>
and fits a dynamic multivariate panel model to each imputed data set using
<code><a href="dynamite.html">dynamite()</a></code>. Posterior samples from each imputation run are
combined. When using wide format imputation, the long format <code>data</code> is
automatically converted to a wide format before imputation to preserve the
longitudinal structure, and then converted back to long format for
estimation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dynamice</span><span class="op">(</span></span>
<span>  <span class="va">dformula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">time</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  priors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  backend <span class="op">=</span> <span class="st">"rstan"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose_stan <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stanc_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"O0"</span><span class="op">)</span>,</span>
<span>  threads_per_chain <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  grainsize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  custom_stan_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mice_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  impute_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  keep_imputed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  stan_csv_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dformula">dformula<a class="anchor" aria-label="anchor" href="#arg-dformula"></a></dt>
<dd><p>[<code>dynamiteformula</code>]<br> The model formula.
See <code><a href="dynamiteformula.html">dynamiteformula()</a></code> and 'Details'.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>[<code>data.frame</code>, <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a></code>, or <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a></code>]<br>
The data that contains the variables in the model in long format.
Supported column types are <code>integer</code>, <code>logical</code>, <code>double</code>, and
<code>factor</code>. Columns of type <code>character</code> will be converted to factors.
Unused factor levels will be dropped. The <code>data</code> can contain missing
values which will simply be ignored in the estimation in a case-wise
fashion (per time-point and per channel). Input <code>data</code> is converted to
channel specific matrix representations via <code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">stats::model.matrix.lm()</a></code>.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>[<code>character(1)</code>]<br> A column name of <code>data</code> that denotes the
time index of observations. If this variable is a factor, the integer
representation of its levels are used internally for defining the time
indexing.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>[<code>character(1)</code>]<br> A column name of <code>data</code> that denotes the
unique groups or <code>NULL</code> corresponding to a scenario without any groups.
If <code>group</code> is <code>NULL</code>, a new column <code>.group</code> is created with constant
value <code>1L</code> is created indicating that all observations belong to the same
group. In case of name conflicts with <code>data</code>, see the <code>group_var</code> element
of the return object to get the column name of the new variable.</p></dd>


<dt id="arg-priors">priors<a class="anchor" aria-label="anchor" href="#arg-priors"></a></dt>
<dd><p>[<code>data.frame</code>]<br> An optional data frame with prior
definitions. See <code><a href="get_priors.html">get_priors()</a></code> and 'Details'.</p></dd>


<dt id="arg-backend">backend<a class="anchor" aria-label="anchor" href="#arg-backend"></a></dt>
<dd><p>[<code>character(1)</code>]<br> Defines the backend interface to Stan,
should be  either <code>"rstan"</code> (the default) or <code>"cmdstanr"</code>. Note that
<code>cmdstanr</code> needs to be installed separately as it is not on CRAN. It also
needs the actual <code>CmdStan</code> software. See <a href="https://mc-stan.org/cmdstanr/" class="external-link">https://mc-stan.org/cmdstanr/</a>
for details.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>[<code>logical(1)</code>]<br> All warnings and messages are suppressed
if set to <code>FALSE</code>. Defaults to <code>TRUE</code>. Setting this to <code>FALSE</code> will also
disable checks for perfect collinearity in the model matrix.</p></dd>


<dt id="arg-verbose-stan">verbose_stan<a class="anchor" aria-label="anchor" href="#arg-verbose-stan"></a></dt>
<dd><p>[<code>logical(1)</code>]<br> This is the <code>verbose</code> argument for
<code><a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">rstan::sampling()</a></code>. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-stanc-options">stanc_options<a class="anchor" aria-label="anchor" href="#arg-stanc-options"></a></dt>
<dd><p>[<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>]<br> This is the <code>stanc_options</code> argument
passed to the compile method of a <code>CmdStanModel</code> object via
<code>cmdstan_model()</code> when <code>backend = "cmdstanr"</code>. Defaults to <code>list("O0")</code>.
To enable level one compiler optimizations, use <code>list("O1")</code>.
See <a href="https://mc-stan.org/cmdstanr/reference/cmdstan_model.html" class="external-link">https://mc-stan.org/cmdstanr/reference/cmdstan_model.html</a>
for details.</p></dd>


<dt id="arg-threads-per-chain">threads_per_chain<a class="anchor" aria-label="anchor" href="#arg-threads-per-chain"></a></dt>
<dd><p>[<code>integer(1)</code>]<br> A Positive integer defining the
number of parallel threads to use within each chain. Default is <code>1</code>. See
<code><a href="https://mc-stan.org/rstan/reference/rstan_options.html" class="external-link">rstan::rstan_options()</a></code> and
<a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">https://mc-stan.org/cmdstanr/reference/model-method-sample.html</a>
for details.</p></dd>


<dt id="arg-grainsize">grainsize<a class="anchor" aria-label="anchor" href="#arg-grainsize"></a></dt>
<dd><p>[<code>integer(1)</code>]<br> A positive integer defining the
suggested size of the partial sums when using within-chain parallelization.
Default is number of time points divided by <code>threads_per_chain</code>.
Setting this to <code>1</code> leads the workload division entirely to the internal
scheduler. The performance of the within-chain parallelization can be
sensitive to the choice of <code>grainsize</code>, see Stan manual on reduce-sum for
details.</p></dd>


<dt id="arg-custom-stan-model">custom_stan_model<a class="anchor" aria-label="anchor" href="#arg-custom-stan-model"></a></dt>
<dd><p>[<code>character(1)</code>]<br> An optional character string
that either contains a customized Stan model code or a path to a <code>.stan</code>
file that contains the code. Using this will override the generated model
code. For expert users only.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>[<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>]<br> A named list of form <code>name = TRUE</code> indicating
additional objects in the environment of the <code>dynamite</code> function which are
added to the return object. Additionally, values <code>no_compile = TRUE</code> and
<code>no_sampling = TRUE</code> can be used to skip the compilation of the Stan code
and sampling steps respectively. This can be useful for debugging when
combined with <code>model_code = TRUE</code>, which adds the Stan model code to the
return object.</p></dd>


<dt id="arg-mice-args">mice_args<a class="anchor" aria-label="anchor" href="#arg-mice-args"></a></dt>
<dd><p>[<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>]<br>
Arguments passed to <code><a href="https://amices.org/mice/reference/mice.html" class="external-link">mice::mice()</a></code> excluding <code>data</code>.</p></dd>


<dt id="arg-impute-format">impute_format<a class="anchor" aria-label="anchor" href="#arg-impute-format"></a></dt>
<dd><p>[<code>character(1)</code>]<br> Format of the data that will be
passed to the imputation method. Should be either <code>"wide"</code> (the default)
or <code>"long"</code> corresponding to wide format and long format imputation.</p></dd>


<dt id="arg-keep-imputed">keep_imputed<a class="anchor" aria-label="anchor" href="#arg-keep-imputed"></a></dt>
<dd><p>[<code>logical(1)</code>]<br> Should the imputed datasets be
kept in the return object? The default is <code>FALSE</code>. If <code>TRUE</code>, the
imputations will be included in the <code>imputed</code> field in the return object
that is otherwise <code>NULL</code>.</p></dd>


<dt id="arg-stan-csv-dir">stan_csv_dir<a class="anchor" aria-label="anchor" href="#arg-stan-csv-dir"></a></dt>
<dd><p>[<code>character(1)</code>]<br> A directory path to output the
Stan .csv files when <code>backend</code> is <code>"cmdstanr"</code>. The files are saved here
via <code>$save_output_files()</code> to avoid garbage collection between sampling
runs with different imputed datasets.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>For <code><a href="dynamite.html">dynamite()</a></code>, additional arguments to <code><a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">rstan::sampling()</a></code> or
the <code>$sample()</code> method of the <code>CmdStanModel</code> object
(see <a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">https://mc-stan.org/cmdstanr/reference/model-method-sample.html</a>),
such as <code>chains</code> and <code>cores</code>
(<code>chains</code> and <code>parallel_chains</code> in <code>cmdstanr</code>). For <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>,
additional arguments to <code><a href="as.data.frame.dynamitefit.html">as.data.frame.dynamitefit()</a></code>. For <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>,
further arguments to the print method for tibbles
(see <a href="https://tibble.tidyverse.org/reference/formatting.html" class="external-link">tibble::formatting</a>). Not used for <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Model fitting
<code><a href="dynamite.html">dynamite</a>()</code>,
<code><a href="get_priors.html">get_priors</a>()</code>,
<code><a href="update.dynamitefit.html">update.dynamitefit</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

